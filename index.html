<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Productos</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js"></script>
    <style>
        .product, .cart-item {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px;
        }
        .product img {
            max-width: 150px;
        }
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>
    <h1>Productos</h1>
    <h1>Catálogo de Productos</h1>
    <div id="product-catalog"></div>

    <h2>Carrito de Compras</h2>
    <div id="cart-items"></div>
    <p>Total: $<span id="cart-total">0.00</span></p>
    <button onclick="checkout()">Pagar</button>

    <script>
        // Carrito de compras (definido en el ámbito global)
        let cart = [];

        // Datos de ejemplo de productos (puedes reemplazarlo con datos reales)
        const products = [
            { id: 1, name: "Producto 1", description: "Descripción del producto 1", price: 100, image: "https://via.placeholder.com/150" },
            { id: 2, name: "Producto 2", description: "Descripción del producto 2", price: 200, image: "https://via.placeholder.com/150" },
            { id: 3, name: "Producto 3", description: "Descripción del producto 3", price: 300, image: "https://via.placeholder.com/150" }
        ];

        // Función para inicializar el catálogo
        function initializeCatalog() {
            const catalog = document.getElementById('product-catalog');
            products.forEach((product) => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product';
                productDiv.innerHTML = `
                    <img src="${product.image}" alt="${product.name}">
                    <h3>${product.name}</h3>
                    <p>${product.description}</p>
                    <p>Precio: $${product.price.toFixed(2)}</p>
                    <button onclick="addToCart(${product.id})">Agregar al Carrito</button>
                    <button onclick="buyNow(${product.id})">Pagar Ahora</button>
                `;
                catalog.appendChild(productDiv);
            });
        }

        // Función para agregar productos al carrito
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingProductIndex = cart.findIndex(item => item.id === productId);

            if (existingProductIndex > -1) {
                // Incrementar la cantidad si el producto ya está en el carrito
                cart[existingProductIndex].quantity += 1;
            } else {
                // Agregar nuevo producto al carrito
                cart.push({...product, quantity: 1});
            }

            updateCart();
        }

        // Función para eliminar un producto del carrito
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCart();
        }

        // Función para modificar la cantidad de un producto en el carrito
        function updateQuantity(productId, quantity) {
            const product = cart.find(item => item.id === productId);

            if (product) {
                product.quantity = parseInt(quantity, 10);
                if (product.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCart();
                }
            }
        }

        // Función para actualizar el carrito
        function updateCart() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            let total = 0;

            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <span>${item.name} (${item.quantity})</span>
                    <span>$${(item.price * item.quantity).toFixed(2)}</span>
                    <button onclick="removeFromCart(${item.id})">Eliminar</button>
                    <input type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${item.id}, this.value)">
                `;
                cartItems.appendChild(cartItem);
                total += item.price * item.quantity;
            });

            document.getElementById('cart-total').textContent = total.toFixed(2);
        }

        // Función para el proceso de pago
        function checkout() {
            if (cart.length === 0) {
                alert('El carrito está vacío.');
                return;
            }

            alert('Gracias por su compra! Procediendo al pago...');
            cart = [];
            updateCart();
        }

        // Función para comprar inmediatamente
        function buyNow(productId) {
            const product = products.find(p => p.id === productId);
            alert(Gracias por comprar ${product.name}. Procediendo al pago...);
            checkout();
        }

        // Inicializar catálogo al cargar la página
        initializeCatalog();
    </script>
</body>
</html>
